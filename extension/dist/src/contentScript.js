console.log("Recall.me content script loaded");function n(e){const t=document.createElement("div");t.textContent=e,Object.assign(t.style,{position:"fixed",bottom:"20px",right:"20px",backgroundColor:"rgba(9, 9, 11, 0.9)",color:"white",padding:"12px 20px",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",zIndex:"999999",fontFamily:"system-ui, sans-serif",fontSize:"14px",fontWeight:"500",transition:"opacity 0.3s ease",border:"1px solid rgba(255,255,255,0.1)",backdropFilter:"blur(10px)"}),document.body.appendChild(t),setTimeout(()=>{t.style.opacity="0",setTimeout(()=>t.remove(),300)},3e3)}function a(){n("Capturing memory..."),chrome.runtime.sendMessage({action:"hotkeyCapture"},e=>{if(chrome.runtime.lastError){console.error("Recall.me Error:",chrome.runtime.lastError),n("Extension connection error. Try reloading the page.");return}e?.success&&console.log("Screenshot initiated successfully")})}chrome.runtime.onMessage.addListener(e=>{e?.action==="showPageToast"&&typeof e.message=="string"&&n(e.message)});window.addEventListener("keydown",e=>{if(e.repeat)return;const t=e.key.toLowerCase(),o=e.ctrlKey&&e.shiftKey&&t==="s",r=e.altKey&&t==="s",i=e.metaKey&&e.shiftKey&&t==="s",s=e.metaKey&&e.shiftKey&&(e.key==="3"||e.key==="4"||e.key==="5");(o||r||i||s)&&(e.preventDefault(),a())});window.addEventListener("keyup",e=>{e.key==="PrintScreen"&&(n("PrintScreen detected. Capturing..."),a())});window.addEventListener("paste",e=>{if(!e.clipboardData)return;const t=e.clipboardData.items;for(let o=0;o<t.length;o++){if(!t[o].type.includes("image"))continue;n("Image pasted. Processing memory...");const r=t[o].getAsFile();if(!r)continue;const i=new FileReader;i.onload=s=>{const c=s.target?.result;chrome.runtime.sendMessage({action:"uploadPastedImage",imageData:c},()=>{chrome.runtime.lastError?n("Extension connection error."):console.log("Pasted image processed")})},i.readAsDataURL(r);break}});
